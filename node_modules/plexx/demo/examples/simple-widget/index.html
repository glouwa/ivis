<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>plexx.js example: Simple Widget</title>
</head>

<body>
<h1>plexx.js example: Simple Widget</h1>

<div class="plexx" id="simple-widget" style="height:40em; width:30em; border:solid 0.1em #000000;"></div>

<nav id="simple-widget-debug-panel"></nav>

<script type="text/javascript" src="./../../../framework/build/plexx.js"></script>
<script>
    var myCanvas = new Plexx.DrawingArea({
        width: 400,
        height: 400,
        align: "xMidYMid",
        background: "#1c1c1c"
    });

    var renderContext = new Plexx.RenderContext({id: "simple-widget"});

    var rectangle1 = new Plexx.Rectangle({
        width: 10,
        height: 300,
        position: [195, 50],
        colour: "black"
    });

    // --------------------------------------------------------------------------------
    // Slider A
    // --------------------------------------------------------------------------------

    var sliderAHandle = new Plexx.Rectangle({
        width: 20,
        height: 50,
        position: [190, 20],
        colour: "red",
        draggable: true,
        draggingSpace: [100, 20, 200, 50]
    });

    sliderAHandle.on("mousein", function (e) {
            sliderAHandle.setColour("yellow");
    });

    sliderAHandle.on("mouseout", function (e) {
        sliderAHandle.setColour("red");
    });

    var sliderABar = new Plexx.Rectangle({
        width: 200,
        height: 20,
        position: [100, 35],
        colour: "black",
    });

    var sliderAPanel = new Plexx.Rectangle({
        width: 60,
        height: 20,
        position: [320, 35],
        colour: "white"
    });

    var sliderAText = new Plexx.Text({
        text: "50%",
        fontFamily: "DejaVu Sans Mono",
        fontSize: "20",
        position: [320, 37],
        colour: "black"
    });

    sliderAHandle.on("dragmove", function (e) {
        sliderAText.setText(Math.round(((((e.position.x + e.translation[0]) - 100) / 180) * 100)) + "%");
        console.log(e.position.x, e.translation[0]);
    });

    // --------------------------------------------------------------------------------
    // Slider B
    // --------------------------------------------------------------------------------

    var sliderBBarPart1 = new Plexx.Rectangle({
        width: 10,
        height: 200,
        position: [195, 100],
        colour: "black"
    });

    var sliderBBarPart2 = new Plexx.Rectangle({
        width: 10,
        height: 10,
        position: [195, 100],
        colour: "yellow"
    });

    var sliderBBarPart3 = new Plexx.Rectangle({
        width: 10,
        height: 10,
        position: [195, 300],
        colour: "yellow"
    });

    var sliderBHandlePart1 = new Plexx.Rectangle({
        width: 200,
        height: 20,
        position: [100, 110],
        colour: "red",
    });

    var sliderBHandlePart2 = new Plexx.Rectangle({
        width: 5,
        height: 40,
        position: [100, 100],
        colour: "red",
    });

    var sliderBHandlePart3 = new Plexx.Rectangle({
        width: 5,
        height: 40,
        position: [295, 100],
        colour: "red",
    });

    var sliderBHandle = new Plexx.Group({
        translation: [100, 100],
        draggable: true,
//        draggingSpace: [100, 100, 200, 210]
    });

    sliderBHandle.add(sliderBHandlePart1);
    sliderBHandle.add(sliderBHandlePart2);
    sliderBHandle.add(sliderBHandlePart3);

    var circle1 = new Plexx.Circle({
        radius: 10,
        position: [200, 100],
        colour: "blue",
        draggable: true,
        draggingSpace: [100, 100, 200, 200]
    });

//    rectangle2.on("mousein", function (e) {
//        rectangle2.setColour("yellow");
//    });
//
//    rectangle2.on("mouseout", function (e) {
//        rectangle2.setColour("green");
//    });

//    rectangle2.on("dragmove", function (e) {
//        rectangle2.setColour("black");
        //text.setText(e.translation[1]);
//    });

//    rectangle2.on("dragend", function (e) {
//        rectangle2.setColour("blue");
//    });

    var text = new Plexx.Text({
        text: "?",
        fontFamily: "Arial",
        position: [300, 350],
        colour: "white"
    });

    myCanvas.add(sliderABar);
    myCanvas.add(sliderAHandle);
    myCanvas.add(sliderAPanel);
    myCanvas.add(sliderAText);

//    myCanvas.add(sliderBBarPart1);
//    myCanvas.add(sliderBBarPart2);
//    myCanvas.add(sliderBBarPart3);
//    myCanvas.add(sliderBHandle);
//    myCanvas.add(circle1);
//    myCanvas.add(text);

    var debugPanel = new Plexx.DebugHelper("simple-widget-debug-panel", renderContext, myCanvas);

    myCanvas.run(renderContext);
</script>
</body>
</html>

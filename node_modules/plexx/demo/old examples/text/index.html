<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>PLEXX.JS example: Text</title>
</head>
<body>

<h1>PLEXX.JS example: Text</h1>
<form>
    Text: <input type="text" id="message">
    Font: <input type="text" id="font-family">
    <input type="button" id="set-message" value="Set Message" onclick="setMessage()">
    <br>
    <br>
</form>
<div class="plexx" id="text" style="height:50em; width:50em; border:solid 0.1em #000000;"></div>
<nav id="text-debug-panel"></nav>

<! load plexx >
<script type="text/javascript" src="../../../framework/build/plexx.js"></script>

<! plexx script >
<script>
    var myCanvas = new Plexx.DrawingArea({
        width: 1000,
        height: 1000,
        background: "white",
        align: "xMidYMid"
    });
    var renderContext = new Plexx.RenderContext({id: "text", width: 1000, height: 1000});

    // initial values
    var message = "Lorem ipsum dolor sit amet, consetetur, adipisci velit";
    var font = "monospace";

    // some position points
    myCanvas.add(new Plexx.Circle({radius: 10, position: [500, 870], colour: "blue"}));
    myCanvas.add(new Plexx.Circle({radius: 10, position: [500, 770], colour: "black"}));
    myCanvas.add(new Plexx.Circle({radius: 10, position: [500, 670], colour: "red"}));

    // create a lot of text nodes
    var textNodes = [];

    var text300 = new Plexx.Text({
        text: message,
        position: [0, 10],
        colour: "#00000033",
        fontSize: 140,
        fontFamily: font,
    });


    text100 = text300.clone();
    text100.setFontSize(70);
    text100.setPosition([0, 340]);

    text50 = text300.clone();
    text50.setFontSize(50);
    text50.setPosition([0, 450]);

    text20 = text300.clone();
    text20.setFontSize(20);
    text20.setPosition([0, 520]);

    text10 = text300.clone();
    text10.setFontSize(10);
    text10.setPosition([0, 550]);

    text5 = text300.clone();
    text5.setFontSize(5);
    text5.setPosition([0, 570]);

    textNodes.push(text300);
    textNodes.push(text100);
    textNodes.push(text50);
    textNodes.push(text20);
    textNodes.push(text10);
    textNodes.push(text5);

    textNodes.push(new Plexx.Text({
        text: message,
        position: [500, 870],
        colour: "#0000FF33",
        fontSize: 40,
        fontFamily: font,
        textVerticalAlignment: "bottom",
        textHorizontalAlignment: "center"
    }));

    textNodes.push(new Plexx.Text({
        text: message,
        position: [500, 870],
        colour: "#FF000033",
        fontSize: 40,
        fontFamily: font,
        textVerticalAlignment: "middle",
        textHorizontalAlignment: "center"
    }));

    textNodes.push(new Plexx.Text({
        text: message,
        position: [500, 870],
        colour: "#00FF0033",
        fontSize: 40,
        fontFamily: font,
        textVerticalAlignment: "top",
        textHorizontalAlignment: "center"
    }));

    textNodes.push(new Plexx.Text({
        text: message,
        position: [500, 670],
        colour: "#0000FF33",
        fontSize: 40,
        fontFamily: font,
        textVerticalAlignment: "bottom",
        textHorizontalAlignment: "right"
    }));

    textNodes.push(new Plexx.Text({
        text: message,
        position: [500, 670],
        colour: "#FF000033",
        fontSize: 40,
        fontFamily: font,
        textVerticalAlignment: "middle",
        textHorizontalAlignment: "right"
    }));

    textNodes.push(new Plexx.Text({
        text: message,
        position: [500, 670],
        colour: "#00FF0033",
        fontSize: 40,
        fontFamily: font,
        textVerticalAlignment: "top",
        textHorizontalAlignment: "right"
    }));

    textNodes.push(new Plexx.Text({
        text: message,
        position: [500, 770],
        colour: "#0000FF33",
        fontSize: 40,
        fontFamily: font,
        textVerticalAlignment: "bottom",
        textHorizontalAlignment: "left"
    }));

    textNodes.push(new Plexx.Text({
        text: message,
        position: [500, 770],
        colour: "#FF000033",
        fontSize: 40,
        fontFamily: font,
        textVerticalAlignment: "middle",
        textHorizontalAlignment: "left"
    }));

    textNodes.push(new Plexx.Text({
        text: message,
        position: [500, 770],
        colour: "#00FF0033",
        fontSize: 40,
        fontFamily: font,
        textVerticalAlignment: "top",
        textHorizontalAlignment: "left"
    }));

    // add all text nodes to canvas
    for (var index = 0; index < textNodes.length; index++) {
        myCanvas.add(textNodes[index]);
    }

    // set message and font family in all text nodes
    function setMessage() {
        var message = document.getElementById("message").value;
        var fontFamily = document.getElementById("font-family").value;
        for (var index = 0; index < textNodes.length; index++) {
            textNodes[index].setText(message);
            textNodes[index].setFontFamily(fontFamily);
        }
        myCanvas.renderSingleFrame(renderContext);
    }

    var debugPanel = new Plexx.DebugHelper("text-debug-panel", renderContext, myCanvas);

    // run plexx
    myCanvas.run(renderContext);
</script>
</body>
</html>

